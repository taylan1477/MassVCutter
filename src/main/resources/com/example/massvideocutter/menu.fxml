<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Menu?>
<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.media.MediaView?>
<?import javafx.scene.text.Font?>

<BorderPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefWidth="1100" prefHeight="700" xmlns="http://javafx.com/javafx/23" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.massvideocutter.ui.MainController">
   
   <!-- TOP: Menu + Progress -->
   <top>
      <VBox maxHeight="-Infinity" BorderPane.alignment="CENTER">
         <MenuBar fx:id="menuBar" maxHeight="-Infinity" minHeight="-Infinity" prefHeight="26.0">
            <Menu mnemonicParsing="false" text="File">
               <MenuItem mnemonicParsing="false" text="Open" onAction="#handleImportButtonAction" />
               <MenuItem mnemonicParsing="false" text="Close" />
            </Menu>
            <Menu mnemonicParsing="false" text="Edit">
               <MenuItem mnemonicParsing="false" text="Delete Selected" />
               <MenuItem mnemonicParsing="false" text="Clear All" />
            </Menu>
            <Menu mnemonicParsing="false" text="Help">
               <MenuItem mnemonicParsing="false" text="About" />
            </Menu>
         </MenuBar>
         <ProgressBar fx:id="progressBar" prefHeight="5.0" maxWidth="Infinity" progress="0.0" />
      </VBox>
   </top>

   <!-- LEFT: File List + Method Selector -->
   <left>
      <VBox prefWidth="170.0" spacing="6.0" BorderPane.alignment="CENTER">
         <padding>
            <Insets top="8" right="8" bottom="8" left="8" />
         </padding>
         
         <!-- File List -->
         <ListView fx:id="fileListView" VBox.vgrow="ALWAYS" prefHeight="360.0" />
         
         <!-- Add Files Button -->
         <Button fx:id="btnImport" alignment="CENTER" mnemonicParsing="false" onAction="#handleImportButtonAction" maxWidth="Infinity" prefHeight="34" text="ADD FILES" styleClass="action-button">
            <font>
               <Font size="12.0" />
            </font>
         </Button>
         
         <!-- Method Selector Label -->
         <Label text="TRIM METHOD" styleClass="section-label">
            <VBox.margin>
               <Insets top="6.0" />
            </VBox.margin>
         </Label>
         
         <!-- Method Selector -->
         <VBox fx:id="methodSelector" spacing="3.0" styleClass="method-selector-vertical">
            <ToggleButton fx:id="btnManual" text="âœ‹ Manual" styleClass="method-toggle-vertical" maxWidth="Infinity" onAction="#handleMethodChange">
               <toggleGroup>
                  <ToggleGroup fx:id="methodGroup" />
               </toggleGroup>
            </ToggleButton>
            <ToggleButton fx:id="btnAudio" text="ðŸ”Š Audio" styleClass="method-toggle-vertical" maxWidth="Infinity" toggleGroup="$methodGroup" onAction="#handleMethodChange" />
            <ToggleButton fx:id="btnScene" text="ðŸŽ¬ Scene" styleClass="method-toggle-vertical" maxWidth="Infinity" toggleGroup="$methodGroup" onAction="#handleMethodChange" />
         </VBox>
      </VBox>
   </left>

   <!-- CENTER: Video + Timeline + Controls -->
   <center>
      <VBox alignment="CENTER" spacing="4.0" BorderPane.alignment="CENTER">
         <padding>
            <Insets top="8" right="8" bottom="8" left="8" />
         </padding>
         
         <!-- Video Player -->
         <MediaView fx:id="mediaView" fitHeight="340.0" fitWidth="700.0" />
         
         <!-- Combined Timeline + Waveform -->
         <StackPane fx:id="timelineContainer" maxWidth="Infinity" prefHeight="60.0">
            <VBox.margin>
               <Insets top="4.0" />
            </VBox.margin>
         </StackPane>
         
         <!-- Time Display -->
         <HBox alignment="CENTER" spacing="20.0">
            <Label fx:id="startTimeLabel" text="START: --:--" styleClass="time-label" />
            <Label fx:id="currentTimeLabel" text="00:00 / 00:00" styleClass="time-label-current" />
            <Label fx:id="endTimeLabel" text="END: --:--" styleClass="time-label" />
         </HBox>
         
         <!-- Controls Row with LARGER Image Slots -->
         <HBox alignment="CENTER" spacing="10.0">
            <VBox.margin>
               <Insets top="8.0" />
            </VBox.margin>
            
            <!-- Intro Reference Image - LARGE -->
            <VBox alignment="CENTER" spacing="3.0">
               <Label text="INTRO" styleClass="image-label" />
               <ImageView fx:id="introImage" fitHeight="125.0" fitWidth="200.0" onMouseClicked="#handleIntroClick" pickOnBounds="true" preserveRatio="true" styleClass="reference-image">
                  <image>
                     <Image url="@images/defintro.png" />
                  </image>
               </ImageView>
            </VBox>
            
            <!-- SET START Button - MEDIUM -->
            <Button fx:id="btnSetStart" mnemonicParsing="false" onAction="#handleSetStart" text="âœ‚" prefWidth="60" prefHeight="40" styleClass="marker-button-medium" />
            
            <!-- Playback Controls - MEDIUM -->
            <HBox alignment="CENTER" spacing="4.0" styleClass="playback-controls">
               <Button fx:id="btnRewind" mnemonicParsing="false" onAction="#handleRewind" text="âª" prefWidth="60" prefHeight="40" styleClass="playback-button-medium" />
               <Button fx:id="btnPlayPause" mnemonicParsing="false" onAction="#handlePlayPause" text="â–¶" prefWidth="90" prefHeight="60" styleClass="playback-button-main-medium" />
               <Button fx:id="btnForward" mnemonicParsing="false" onAction="#handleForward" text="â©" prefWidth="60" prefHeight="40" styleClass="playback-button-medium" />
            </HBox>
            
            <!-- SET END Button - MEDIUM -->
            <Button fx:id="btnSetEnd" mnemonicParsing="false" onAction="#handleSetEnd" text="âœ‚" prefWidth="60" prefHeight="40" styleClass="marker-button-medium" />
            
            <!-- Outro Reference Image - LARGE -->
            <VBox alignment="CENTER" spacing="3.0">
               <Label text="OUTRO" styleClass="image-label" />
               <ImageView fx:id="outroImage" fitHeight="125.0" fitWidth="200.0" onMouseClicked="#handleOutroClick" pickOnBounds="true" preserveRatio="true" styleClass="reference-image">
                  <image>
                     <Image url="@images/defoutro.png" />
                  </image>
               </ImageView>
            </VBox>
         </HBox>
      </VBox>
   </center>

   <!-- RIGHT: Info + Inspector + Actions -->
   <right>
      <VBox alignment="TOP_CENTER" prefWidth="140.0" spacing="6.0" BorderPane.alignment="CENTER">
         <padding>
            <Insets top="8" right="8" bottom="8" left="8" />
         </padding>
         
         <!-- Info Label -->
         <Label fx:id="infoLabel" wrapText="true" maxWidth="120.0" styleClass="info-label">
            <font>
               <Font size="10.0" />
            </font>
         </Label>
         
         <!-- Activity Log -->
         <Label text="ACTIVITY LOG" styleClass="section-label" />
         <ListView fx:id="inspector" VBox.vgrow="ALWAYS" prefHeight="320.0" />
         
         <!-- Action Buttons -->
         <Button fx:id="btnTrim" alignment="CENTER" mnemonicParsing="false" onAction="#handleTrim" maxWidth="Infinity" prefHeight="36" text="âœ‚ TRIM" styleClass="action-button">
            <font>
               <Font size="13.0" />
            </font>
         </Button>
         <Button fx:id="btnTrimAll" alignment="CENTER" mnemonicParsing="false" onAction="#handleBatchTrim" maxWidth="Infinity" prefHeight="30" text="âœ‚ TRIM ALL" styleClass="action-button-secondary">
            <font>
               <Font size="11.0" />
            </font>
         </Button>
      </VBox>
   </right>
</BorderPane>
